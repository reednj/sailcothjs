<!doctype html>

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name='viewport' content='user-scalable=no, width=device-width, initial-scale=1.0' />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	
	<title>Canvas Test</title>

    <style type='text/css'>
        #canvas {
            border: 1px gray solid;
        }
	</style>


    <script type='text/javascript' src='../lib/viewport.js'></script>
    <script type='text/javascript'>
        class App {
            constructor() {
                
                var element = document.getElementById('canvas')
                this.viewport = new StaticViewport(element, {});
                this.center = this.viewport.getCenter();
                this.viewport.start();
                this.balls = this.balls || [];
                
                setInterval(() => {
                    if(this.balls.length < 10) {
                        this.addBall();
                    } else {
                        this.removeBall();
                    }

                    console.log(this.balls.length);
                }, 500);
            }

            addBall() {
                var b = new BouncingBall({x: this.center.x, y: this.center.y});
                this.balls.push(b);
                this.viewport.add(b);
            }

            removeBall() {
                var b = this.balls.shift();
                b.renderingFinished = true;
            }
        }

        window.addEventListener('load', () => window._app = new App());
	</script>

</head>

<body>
    <canvas id='canvas' width='400' height='300'></canvas>
</body>

</html>
